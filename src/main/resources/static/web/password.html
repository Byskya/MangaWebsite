<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>修改密码</title>
</head>
<body>
<div class="panel-body">
  <!--修改密码表单开始-->
  <form id="form-change-password" class="form-horizontal" role="form">
    <div class="form-group">
      <label class="col-md-2 control-label">原密码：</label>
      <div class="col-md-8">
        <input name="old_password" type="text" class="form-control" placeholder="请输入原密码">
      </div>
    </div>
    <div class="form-group">
      <label class="col-md-2 control-label">新密码：</label>
      <div class="col-md-8">
        <input name="new_password" type="text" class="form-control" placeholder="请输入新密码">
      </div>
    </div>
    <div class="form-group">
      <label class="col-md-2 control-label">确认密码：</label>
      <div class="col-md-8">
        <input type="text" class="form-control" placeholder="请再次输入新密码">
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <input id="btn-change-password" type="button" class="btn btn-primary" value="修改" />
      </div>
    </div>
  </form>
</div>
<script type="text/javascript" src="../js/vue.js"></script>
<script type="text/javascript" src="../js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../js/axios.min.js"></script>
<script type="text/javascript">
  $("#btn-change-password").click(function(){
    $.ajax({
      "url":"/users/change_password",
      "data":$("#form-change-password").serialize(),
      "type":"POST",
      "dataType":"json",
      "success":function(json) {
        if (json.state == 100) {
          alert("修改成功！请重新登录");
          location.href = "login.html";
        } else {
          alert(json.message);
        }
      },
      "error":function() {
        alert("您的登录信息已经过期，请重新登录！");
        location.href = "login.html";
      }
    });
  });
</script>
</body>
</html>