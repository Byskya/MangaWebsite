<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="author" content="Kodinger">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>用户注册页面</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../css/my-login.css">
</head>
<body class="my-login-page">
<section class="h-100">
    <div class="container h-100">
        <div class="row justify-content-md-center h-100">
            <div class="card-wrapper">
                <div class="brand">
                    <img src="../images/index/logo.jpg" alt="bootstrap 4 login page">
                </div>
                <div class="card fat">
                    <div class="card-body">
                        <h4 class="card-title">用户注册</h4>
                        <form id="form-reg" class="my-login-validation" novalidate="">
                            <div class="form-group">
                                <label for="name">用户名</label>
                                <input id="name" type="text" class="form-control" name="username" required autofocus>
                                <div class="invalid-feedback">
                                    What's your name?
                                </div>
                            </div>



                            <div class="form-group">
                                <label for="pwd1">密码</label>
                                <input id="pwd1" type="password" class="form-control" name="password" required data-eye>
                                <div class="invalid-feedback">
                                    Password is required
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="pwd2">再次输入密码</label>
                                <input id="pwd2" type="password" class="form-control" name="password2" onkeyup="validate()" required data-eye>
                                <div id="tishi">
                                </div>
                            </div>


                            <div class="form-group m-0">
                                <button id="btn-reg" class="btn btn-primary btn-block">
                                    注册
                                </button>
                            </div>
                            <div class="mt-4 text-center">
                                已经拥有账户? <a href="login.html">登录</a>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="footer">
                </div>
            </div>
        </div>
    </div>
</section>
<script type="text/javascript" src="../js/vue.js"></script>
<script type="text/javascript" src="../js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../js/axios.min.js"></script>
<script type="text/javascript">
    function validate() {
        var pwd1 = document.getElementById("pwd1").value;
        var pwd2 = document.getElementById("pwd2").value;

        //对比两次输入的密码
        if (pwd1 == pwd2) {
            document.getElementById("tishi").innerHTML = "<font color='green'>两次密码相同</font>";
        } else {
            document.getElementById("tishi").innerHTML = "<font color='red'>两次密码不相同</font>";
        }
    }

    $("#btn-reg").click(function(){
        $.ajax({
            "url":"/register",
            "data":$("#form-reg").serialize(),
            "type":"POST",
            "dataType":"json",
            "success":function(json) {
                if (json.state == 200) {
                    alert("注册成功！");
                } else {
                    alert("注册失败");
                }
            }
        });
    });
</script>
</body>
</html>